<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link id="faviconLink" rel="icon" type="image/x-icon" href="favicon-light.ico">
    <title>Login - Attendance Registration Application</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root{
        --accent-1: #667eea;
        --accent-2: #764ba2;
        --accent-shadow: rgba(102,126,234,0.18);
        }

        body.light-mode{
        --accent-1: #2563eb;
        --accent-2: #3b82f6;
        --accent-shadow: rgba(37,99,235,0.18);
        }

        /* BODY with gradient transition fix */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Dark mode gradient (base layer) */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: opacity 0.5s ease;
            opacity: 1;
            z-index: -2;
        }

        /* Light mode gradient (top layer) */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #f6f9fc 0%, #dbeafe 50%, #f6f9fc 100%);
            transition: opacity 0.5s ease;
            opacity: 0;
            z-index: -1;
        }

        body.light-mode::after {
            opacity: 1;
        }

        body.light-mode::before {
            opacity: 0;
        }

        .controls-container {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
        }

        .controls-left {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
        }

        .control-card {
            background: white;
            border-radius: 50px;
            padding: 12px 16px;
            box-shadow: 0 18px 60px rgba(2,6,23,0.28);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: box-shadow 0.3s ease;
        }
        body.light-mode .control-card {
            box-shadow: 0 22px 80px rgba(2,6,23,0.20);
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 0;
            padding: 0;
            margin: 0;
            background: transparent;
            box-shadow: none;
            border-radius: 0;
        }

        .help-btn {
            display: inline-grid;
            place-items: center;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, rgba(102,126,234,0.10), rgba(118,75,162,0.06));
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            padding: 0;
            box-shadow: 0 10px 30px rgba(2,6,23,0.18);
        }
        .help-btn:active { transform: scale(0.98); }
        .help-btn svg { width: 18px; height: 18px; display:block; }
        body.light-mode .help-btn {
            background: linear-gradient(135deg, rgba(37,99,235,0.08), rgba(59,130,246,0.03));
            box-shadow: 0 12px 36px rgba(37,99,235,0.14);
        }

        .fullscreen-btn {
            display: inline-grid;
            place-items: center;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, rgba(102,126,234,0.10), rgba(118,75,162,0.06));
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            padding: 0;
            box-shadow: 0 10px 30px rgba(2,6,23,0.18);
        }
        .fullscreen-btn:active { transform: scale(0.98); }
        .fullscreen-btn svg { width: 18px; height: 18px; display:block; }
        body.light-mode .fullscreen-btn {
            background: linear-gradient(135deg, rgba(37,99,235,0.08), rgba(59,130,246,0.03));
            box-shadow: 0 12px 36px rgba(37,99,235,0.14);
        }

        .login-container {
            background: white;
            border-radius: 50px;
            box-shadow: 0 30px 100px rgba(0, 0, 0, 0.45);
            padding: 48px;
            width: 100%;
            max-width: 420px;
            animation: fadeIn 0.5s ease-in;
            transition: box-shadow 0.5s ease, border 0.3s ease, transform 0.25s ease;
        }

        body.light-mode .login-container {
            box-shadow: 0 48px 160px rgba(2,6,23,0.30);
            border: 1px solid rgba(16, 24, 40, 0.06);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        h1 { color: #1a202c; font-size: 28px; font-weight: 700; margin-bottom: 8px; text-align: center; transition: color 0.5s ease; }
        body.light-mode h1 { color: #2563eb; }
        .subtitle { color: #718096; font-size: 14px; text-align: center; margin-bottom: 32px; transition: color 0.5s ease; }
        body.light-mode .subtitle { color: #64748b; }

        .form-group { margin-bottom: 24px; }
        label { display: block; color: #2d3748; font-size: 14px; font-weight: 600; }
        input { width: 100%; padding: 12px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 15px; transition: all 0.3s ease; background: #f7fafc; }
        input:focus { outline: none; border-color: #667eea; background: white; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); transition: all 0.3s ease; }
        body.light-mode input:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
        input::placeholder { color: #a0aec0; }

        .checkbox-container { display: flex; align-items: center; margin-top: 12px; margin-bottom: 8px; }
        .checkbox-container input[type="checkbox"] { width: 18px; height: 18px; margin: 0; margin-right: 10px; cursor: pointer; accent-color: #667eea; transition: accent-color 0.3s ease; }
        body.light-mode .checkbox-container input[type="checkbox"] { accent-color: #2563eb; }
        .checkbox-container label { margin: 0; font-size: 14px; font-weight: 500; color: #4a5568; cursor: pointer; user-select: none; }

        /* LOGIN BUTTON with gradient transition fix */
        .login-btn {
            width: 100%;
            padding: 14px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            position: relative;
            z-index: 0;              /* create stacking context for the button */
            overflow: hidden;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Dark mode gradient overlay (put behind button content) */
        .login-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: opacity 0.5s ease;
            opacity: 0;
            z-index: -1;             /* <- behind the button text/content */
            pointer-events: none;
        }

        /* Extra overlay layer even further behind (optional) */
        .login-btn::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: opacity 0.5s ease;
            opacity: 0;
            z-index: -2;             /* <- behind ::before */
            pointer-events: none;
        }

        body:not(.light-mode) .login-btn::before,
        body:not(.light-mode) .login-btn::after {
            opacity: 1;
        }

        .login-btn {
            box-shadow: 0 14px 40px rgba(2,6,23,0.28);
        }
        
        body.light-mode .login-btn {
            box-shadow: 0 18px 48px rgba(37, 99, 235, 0.18);
        }

        .login-btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 18px 48px rgba(102, 126, 234, 0.5); 
        }
        body.light-mode .login-btn:hover { 
            box-shadow: 0 22px 60px rgba(37, 99, 235, 0.28); 
        }
        .login-btn:active { transform: translateY(0); }

        .site-credit {
            margin-top: 35px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            color: #718096;
            transition: color 0.25s ease, opacity 0.25s ease;
            letter-spacing: 0.2px;
        }
        body.light-mode .site-credit {
            color: #64748b;
        }
        @media (max-width: 420px) {
            .site-credit { font-size: 12px; margin-top: 10px; }
        }

        .mode-label { font-size: 14px; font-weight: 600; color: #4a5568; }
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        
        /* SLIDER with gradient transition fix */
        .slider { 
            position: absolute; 
            cursor: pointer; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background-color: #cbd5e0; 
            border-radius: 26px;
            overflow: hidden;
            transition: background-color 0.4s ease;
        }

        /* White circle knob */
        .slider::before {
            position: absolute; 
            content: ""; 
            height: 20px; 
            width: 20px; 
            left: 3px; 
            bottom: 3px; 
            background-color: white;
            border-radius: 50%; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: transform 0.4s ease;
            z-index: 2;
        }

        /* Gradient overlay for checked state - Dark mode */
        .slider::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
        }

        /* When toggle is ON (checked) */
        input:checked + .slider::after { 
            opacity: 1;
        }

        /* Light mode gradient overlay - added as new pseudo-element on parent */
        .switch::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
            opacity: 0;
            transition: opacity 0.5s ease;
            border-radius: 26px;
            pointer-events: none;
            z-index: 1;
        }

        /* When in light mode AND toggle is ON, show light gradient instead */
        body.light-mode input:checked + .slider::after {
            opacity: 0;
        }

        body.light-mode .switch::before {
            opacity: 0;
        }

        body.light-mode input:checked ~ .switch::before {
            opacity: 1;
        }

        /* Move the knob when checked */
        input:checked + .slider::before { 
            transform: translateX(24px); 
        }

        .help-overlay { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(6, 7, 12, 0.55); z-index: 1500; padding: 24px; opacity: 0; pointer-events: none; transform: translateZ(0); will-change: opacity; transition: opacity 360ms cubic-bezier(.22,.9,.12,1); }
        .help-overlay.is-open { opacity: 1; pointer-events: auto; }
        .help-modal {
            width: 100%; max-width: 760px; max-height: calc(100vh - 80px); overflow: auto;
            background: linear-gradient(180deg, rgba(255,255,255,0.98), white);
            border-radius: 14px; padding: 24px; box-shadow: 0 60px 180px rgba(2,6,23,0.32); position: relative;
            opacity: 0; transform: translateY(14px) scale(0.985); will-change: transform, opacity;
            transition: transform 420ms cubic-bezier(.22,.9,.12,1), opacity 360ms cubic-bezier(.22,.9,.12,1);
        }
        .help-overlay.is-open .help-modal { opacity: 1; transform: translateY(0) scale(1); }
        body.light-mode .help-modal { box-shadow: 0 70px 220px rgba(2,6,23,0.24); border: 1px solid rgba(16,24,40,0.06); }
        .help-modal h2 { font-size: 20px; margin-bottom: 12px; color: #0f172a; }
        .help-modal p { color: #334155; line-height: 1.5; }
        .help-close { position: absolute; top: 12px; right: 12px; width: 36px; height: 36px; border-radius: 8px; border: none; background: transparent; cursor: pointer; display: inline-grid; place-items: center; box-shadow: 0 8px 26px rgba(2,6,23,0.18); }
        .help-close svg { width: 18px; height: 18px; }

        @media (max-width: 520px) {
            .help-modal { max-width: calc(100% - 32px); padding: 18px; border-radius: 12px; }
            .login-container { padding: 32px 20px; }
            .controls-container { flex-direction: column; align-items: flex-end; }
            .controls-left { flex-direction: column; align-items: flex-start; }
        }
        @media (max-width: 360px) {
            .login-container { padding: 22px 14px; }
            .help-modal { padding: 14px; }
        }

        .control-item button {
            background: white !important;
            border: none;
            border-radius: 50px;
            padding: 12px;
            min-height: 48px;
            min-width: 48px;
            display: inline-grid;
            place-items: center;
            box-shadow: 0 18px 60px rgba(2,6,23,0.28);
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
        }

        .control-item button svg { width: 18px; height: 18px; display:block; }
        .control-item button:active { transform: scale(0.98); }

        body.light-mode .control-item button {
            box-shadow: 0 22px 80px rgba(2,6,23,0.20);
        }

        .control-item button:hover {
            transform: translateY(-2px);
            box-shadow: 0 22px 80px rgba(2,6,23,0.32);
        }

        .server-icon { width: 20px; height: 20px; display: block; flex-shrink: 0; }
        .server-status { font-size: 14px; font-weight: 600; color: #4a5568; }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ef4444;
            box-shadow: 0 0 8px rgba(239,68,68,0.28);
            display: inline-block;
            flex-shrink: 0;
        }

        .control-card.server-card {
            padding: 12px 16px;
            gap: 12px;
            min-height: 48px;
            display: flex;
            align-items: center;
            box-shadow: 0 18px 60px rgba(2,6,23,0.28);
        }

        @keyframes pulseRed {
            0% { box-shadow: 0 0 0 0 rgba(239,68,68,0.18); }
            70% { box-shadow: 0 0 0 8px rgba(239,68,68,0.0); }
            100% { box-shadow: 0 0 0 0 rgba(239,68,68,0.0); }
        }
        .status-dot.pulse { animation: pulseRed 2s infinite; }

        .mode-select { display: flex; gap: 8px; align-items: center; margin-bottom: 16px; }
        .segmented {
            display: inline-flex;
            background: #eef2ff;
            border-radius: 999px;
            padding: 4px;
            border: 1px solid rgba(99,102,241,0.08);
            position: relative;
        }
        .segmented input[type="radio"] { display: none; }
        .segmented label {
            padding: 8px 14px;
            font-weight: 600;
            font-size: 14px;
            border-radius: 999px;
            cursor: pointer;
            user-select: none;
            color: #374151;
            position: relative;
            z-index: 1;
            transform-origin: center center; /* scale from center */
            /* slightly longer, smoother transform so scaling feels natural */
            transition: color 0.18s ease, transform 180ms cubic-bezier(.2,.9,.2,1);
        }
        .segmented label:hover { transform: scale(1.06); z-index: 3; }

        /* Improved: layered pseudo-elements so selected state background transitions between dark/light smoothly */
        .segmented label::before,
        .segmented label::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 999px;
            transition: opacity 0.5s ease;
            z-index: -1;
            box-shadow: 0 12px 40px var(--accent-shadow);
            pointer-events: none;
            opacity: 0;
        }

        /* dark-mode gradient layer */
        .segmented label::before {
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
            z-index: -2;
        }

        /* light-mode gradient layer */
        .segmented label::after {
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
            z-index: -3;
            box-shadow: 0 12px 40px rgba(37, 99, 235, 0.18);
        }

        .segmented input[type="radio"]:checked + label {
            color: white;
        }

        /* Show dark gradient when checked in dark mode */
        .segmented input[type="radio"]:checked + label::before {
            opacity: 1;
        }

        /* Override in light mode: show light gradient when checked */
        body.light-mode .segmented input[type="radio"]:checked + label::before {
            opacity: 0;
        }
        body.light-mode .segmented input[type="radio"]:checked + label::after {
            opacity: 1;
        }

        .mode-hint { font-size: 13px; color: #64748b; margin-left: 8px; }

        @media (max-width:420px) {
            .segmented label { padding: 8px 10px; font-size: 13px; }
            .mode-select { flex-direction: column; align-items: stretch; gap: 10px; }
            .mode-hint { margin-left: 0; }
        }

    </style>
</head>
<body class="light-mode">
    <div class="controls-left" role="region" aria-label="Left controls">
        <div class="control-item">
            <button id="helpBtn" class="help-btn" aria-label="Open help" title="Help">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" fill="rgba(37,99,235,0.12)"/>
                    <path d="M12 7a3 3 0 00-3 3h2a1 1 0 112 0c0 .552-.448 1-1 1-.552 0-1 .448-1 1v1h2v-1c0-1.105.895-2 2-2a3 3 0 00-3-3zM11 17h2v2h-2z" fill="#1e293b"/>
                </svg>
            </button>
        </div>

        <div class="control-card server-card" id="serverCard" role="status" aria-label="Szerver állapota: offline" title="Szerver státusz: offline">
            <svg class="server-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="6" rx="1.5" fill="#eef2ff" stroke="#c7d2fe"/>
                <rect x="3" y="14" width="18" height="6" rx="1.5" fill="#f8fafc" stroke="#e6e9f7"/>
                <rect x="7" y="8" width="2" height="2" rx="0.5" fill="#1e293b"/>
                <rect x="7" y="18" width="2" height="2" rx="0.5" fill="#1e293b"/>
                <rect x="11" y="8" width="6" height="2" rx="0.5" fill="#cbd5e1"/>
                <rect x="11" y="18" width="6" height="2" rx="0.5" fill="#cbd5e1"/>
            </svg>
            <span class="server-status">Offline</span>
            <span class="status-dot pulse" aria-hidden="true"></span>
        </div>
    </div>

    <div class="controls-container" role="region" aria-label="Right controls">
        <div class="control-card">
            <span class="mode-label">Light Mode</span>
            <label class="switch" aria-hidden="true">
                <input type="checkbox" id="modeToggle">
                <span class="slider"></span>
            </label>
        </div>

        <div class="control-item">
            <button id="fullscreenBtn" class="fullscreen-btn" aria-label="Toggle fullscreen" title="Fullscreen">
                <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" fill="#1e293b"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="login-container" id="loginContainer">
        <h1 id="pageTitle">Attendance<br>Registration Application</h1>
        <p class="subtitle" id="pageSubtitle">Please enter your credentials to continue</p>
        
        <form id="loginForm">
            <div class="form-group mode-select" aria-label="Bejelentkezés típusa">
                <div class="segmented" role="tablist" aria-label="Bejelentkezési mód">
                    <input type="radio" id="modeUser" name="loginMode" value="user" checked>
                    <label for="modeUser" role="tab" aria-selected="true">Normal</label>

                    <input type="radio" id="modeAdmin" name="loginMode" value="admin">
                    <label for="modeAdmin" role="tab" aria-selected="false">Admin</label>
                </div>
                <div class="mode-hint" id="modeHint">Please select login method</div>
            </div>

            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" name="username" placeholder="Enter your username" required>
            </div>
            
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
                <div class="checkbox-container">
                    <input type="checkbox" id="showPassword">
                    <label for="showPassword">Show password</label>
                </div>
            </div>
            
            <button type="submit" class="login-btn">Log In</button>
            <p class="site-credit" role="note">v0.1 • 2025 • Bug Busters</p>
        </form>
    </div>

    <div id="helpOverlay" class="help-overlay" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="help-modal" role="document" aria-labelledby="helpTitle">
            <button class="help-close" id="helpCloseBtn" aria-label="Close help">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M6 6L18 18M6 18L18 6" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h2 id="helpTitle">Help / Information</h2>
            <p>
                This is a placeholder help text. You can replace this with any instructions, tooltips, FAQs or guidance that matches your page's tone and style.
                The modal is responsive and will cover the central panel when opened. Click outside the box, press the × button or hit Esc to close.
            </p>
        </div>
    </div>

    <script>
        const modeToggle = document.getElementById('modeToggle');
        const body = document.body;
        const modeLabel = document.querySelector('.mode-label');

        function setFavicon(isLight) {
            let link = document.getElementById('faviconLink') || document.querySelector("link[rel~='icon']");
            if (!link) {
                link = document.createElement('link');
                link.id = 'faviconLink';
                link.rel = 'icon';
                document.head.appendChild(link);
            }
            const target = isLight ? 'favicon-light.ico' : 'favicon-dark.ico';
            link.setAttribute('href', target + '?v=' + Date.now());
            link.setAttribute('type', 'image/x-icon');
        }

        if (body.classList.contains('light-mode')) {
            modeToggle.checked = false;
            modeLabel.textContent = 'Light Mode';
            setFavicon(true);
        } else {
            modeToggle.checked = true;
            modeLabel.textContent = 'Dark Mode';
            setFavicon(false);
        }

        modeToggle.addEventListener('change', function() {
            if (this.checked) {
                body.classList.remove('light-mode');
                modeLabel.textContent = 'Dark Mode';
                setFavicon(false);
            } else {
                body.classList.add('light-mode');
                modeLabel.textContent = 'Light Mode';
                setFavicon(true);
            }
        });

        document.getElementById('showPassword').addEventListener('change', function() {
            const passwordInput = document.getElementById('password');
            passwordInput.type = this.checked ? 'text' : 'password';
        });

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const mode = document.querySelector('input[name="loginMode"]:checked').value;
            alert('Login submitted!\nUsername: ' + username + '\nMode: ' + (mode === 'admin' ? 'Admin' : 'Normal'));
        });
    </script>

    <script>
        const helpBtn = document.getElementById('helpBtn');
        const helpOverlay = document.getElementById('helpOverlay');
        const helpCloseBtn = document.getElementById('helpCloseBtn');

        function lockScroll() { document.documentElement.style.overflow = 'hidden'; document.body.style.overflow = 'hidden'; }
        function unlockScroll() { document.documentElement.style.overflow = ''; document.body.style.overflow = ''; }

        function openHelp() {
            helpOverlay.removeEventListener('transitionend', onHideTransitionEnd);
            helpOverlay.classList.add('is-open');
            helpOverlay.setAttribute('aria-hidden', 'false');
            lockScroll();
            window.setTimeout(() => helpCloseBtn.focus(), 80);
        }

        function closeHelp() {
            if (!helpOverlay.classList.contains('is-open')) return;
            helpOverlay.classList.remove('is-open');
            helpOverlay.addEventListener('transitionend', onHideTransitionEnd);
        }

        function onHideTransitionEnd(e) {
            if (e.propertyName && (e.propertyName === 'opacity' || e.propertyName === 'transform')) {
                helpOverlay.setAttribute('aria-hidden', 'true');
                unlockScroll();
                helpBtn.focus();
                helpOverlay.removeEventListener('transitionend', onHideTransitionEnd);
            }
        }

        helpBtn.addEventListener('click', openHelp);
        helpCloseBtn.addEventListener('click', closeHelp);
        helpOverlay.addEventListener('click', function(e) { if (e.target === helpOverlay) closeHelp(); });
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape' && helpOverlay.classList.contains('is-open')) closeHelp(); });
        document.addEventListener('focus', function(event) {
            if (!helpOverlay.classList.contains('is-open')) return;
            if (!helpOverlay.contains(event.target)) {
                event.stopPropagation();
                helpCloseBtn.focus();
            }
        }, true);
    </script>

    <script>
        // FULLSCREEN toggle functionality (változatlan)
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const fullscreenIcon = document.getElementById('fullscreenIcon');

        const expandIcon = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" fill="#1e293b"/>';
        const compressIcon = '<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z" fill="#1e293b"/>';

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        function updateFullscreenIcon() {
            if (document.fullscreenElement) {
                fullscreenIcon.innerHTML = compressIcon;
                fullscreenBtn.setAttribute('title', 'Exit fullscreen');
            } else {
                fullscreenIcon.innerHTML = expandIcon;
                fullscreenBtn.setAttribute('title', 'Fullscreen');
            }
        }

        fullscreenBtn.addEventListener('click', toggleFullscreen);
        document.addEventListener('fullscreenchange', updateFullscreenIcon);

        // Kiegészítés: ha a felhasználó választja az "admin" módot, frissítünk egy kis hintet és a címkét
        const modeUserRadio = document.getElementById('modeUser');
        const modeAdminRadio = document.getElementById('modeAdmin');
        const modeHint = document.getElementById('modeHint');
        const pageTitle = document.getElementById('pageTitle');
        const pageSubtitle = document.getElementById('pageSubtitle');

        function updateModeUI() {
            const selected = document.querySelector('input[name="loginMode"]:checked').value;
            if (selected === 'admin') {
                pageSubtitle.textContent = 'Use your admin credentials to sign in';
            } else {
                pageSubtitle.textContent = 'Please enter your credentials to continue';
            }

            // frissítjük az aria-selected attribútumokat (jobb accessibility)
            modeUserRadio.nextElementSibling.setAttribute('aria-selected', selected === 'user');
            modeAdminRadio.nextElementSibling.setAttribute('aria-selected', selected === 'admin');
        }

        modeUserRadio.addEventListener('change', updateModeUI);
        modeAdminRadio.addEventListener('change', updateModeUI);

        // inicializálás
        updateModeUI();
    </script>
</body>
</html>
